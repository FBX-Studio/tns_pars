# üìä –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç: –°–∏—Å—Ç–µ–º–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. **–ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è**
–ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä—ã –∏ –º–æ–¥–µ–ª—å –ë–î:
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (`parent_id`, `is_comment`)
- ‚ö†Ô∏è –ö–æ–ª–ª–µ–∫—Ç–æ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (–∏—Å–ø–æ–ª—å–∑—É—é—Ç `parent_source_id` –≤–º–µ—Å—Ç–æ `parent_id`)
- üìä –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º

### 2. **–°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–≤—è–∑–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤**

#### **utils/comment_helper.py** - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å
```python
CommentHelper.save_post_with_comments(post_data, comments_data, analyzer)
  ‚Üí –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ—Å—Ç –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
  ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç parent_id –∏ is_comment
  ‚Üí –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã

CommentHelper.get_post_comments(post_id, limit=100)
  ‚Üí –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç—É

CommentHelper.get_comment_stats(post_id)
  ‚Üí –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –≤—Å–µ–≥–æ, –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö, –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö, —Å—Ä–µ–¥–Ω—è—è —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

CommentHelper.get_posts_without_comments(source, limit)
  ‚Üí –ü–æ—Å—Ç—ã –±–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (–¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞)
```

### 3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

–°–æ–∑–¥–∞–Ω–æ 3 –ø–æ–¥—Ä–æ–±–Ω—ã—Ö —Ñ–∞–π–ª–∞:

üìÑ **COMMENTS_ANALYSIS.md** (18 KB)
- –ê–Ω–∞–ª–∏–∑ –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è API
- –°–ø–æ—Å–æ–±—ã –æ–±—Ö–æ–¥–∞
- –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

üìÑ **COMMENTS_IMPLEMENTATION_GUIDE.md** (16 KB)
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- API endpoints
- –ß–µ–∫-–ª–∏—Å—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
- –ì–æ—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

üìÑ **test_comments.py** (8 KB)
- 4 —Ç–µ—Å—Ç–∞ —Å–∏—Å—Ç–µ–º—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –¢–µ—Å—Ç—ã —Å–≤—è–∑–µ–π –ø–æ—Å—Ç-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

---

## üìä –°—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º

| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ | –ü–æ—Å—Ç—ã | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ | –°—Ç–∞—Ç—É—Å | –ß—Ç–æ –Ω—É–∂–Ω–æ |
|-----------|-------|-------------|--------|-----------|
| **Telegram** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `CommentHelper` –≤–º–µ—Å—Ç–æ `parent_source_id` |
| **VK** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | ‚ùå –ú–µ—Ç–æ–¥ –µ—Å—Ç—å, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è | –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ | –í `collect()` –¥–æ–±–∞–≤–∏—Ç—å `get_wall_comments()` |
| **OK.ru** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ | –ß–µ—Ä–µ–∑ Selenium (—Å–ª–æ–∂–Ω–æ, –º–µ–¥–ª–µ–Ω–Ω–æ) |
| **–î–∑–µ–Ω** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `CommentHelper` |
| **–ù–æ–≤–æ—Å—Ç–∏** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ | –ö–∞–∂–¥—ã–π —Å–∞–π—Ç –ø–æ-—Å–≤–æ–µ–º—É |

---

## üö® –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
comment['parent_source_id'] = post['source_id']  # –°—Ç—Ä–æ–∫–∞!
comment['parent_url'] = post['url']
comment['is_comment'] = True
```

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥:**
```python
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
from utils.comment_helper import CommentHelper

saved_post, saved_comments = CommentHelper.save_post_with_comments(
    post_data,      # –î–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–∞
    comments_data,  # –°–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
    analyzer        # –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
)
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è:
# - post.is_comment = False
# - comment.is_comment = True  
# - comment.parent_id = post.id
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: VK - –º–µ—Ç–æ–¥ –µ—Å—Ç—å, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
**–ï—Å—Ç—å –º–µ—Ç–æ–¥:**
```python
def get_wall_comments(self, owner_id, post_id, count=100):
    # –†–∞–±–æ—Ç–∞–µ—Ç!
```

**–ù–æ –Ω–∏–≥–¥–µ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è!**

**–†–µ—à–µ–Ω–∏–µ:**
```python
def collect(self, collect_comments=False):
    posts = self.search_posts(query)
    
    for post in posts:
        comments = []
        
        if collect_comments:
            # –ü–∞—Ä—Å–∏–º owner_id –∏ post_id –∏–∑ source_id
            parts = post['source_id'].split('_')
            owner_id, post_id = parts[2], parts[3]
            
            comments = self.get_wall_comments(owner_id, post_id)
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ
        CommentHelper.save_post_with_comments(post, comments, analyzer)
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: OK.ru - –Ω–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
**–ü—Ä–∏—á–∏–Ω–∞:**
- ‚ùå –ù–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ API
- ‚ö†Ô∏è –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Selenium (–º–µ–¥–ª–µ–Ω–Ω–æ)
- ‚ö†Ô∏è –†–∏—Å–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `get_post_comments()` –≤ `ok_selenium_collector.py`:
```python
def get_post_comments(self, post_url):
    # 1. –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ—Å—Ç
    # 2. –ö–ª–∏–∫–∞–µ–º "–ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏"
    # 3. –°–∫—Ä–æ–ª–ª–∏–º –¥–ª—è –ø–æ–¥–≥—Ä—É–∑–∫–∏
    # 4. –ü–∞—Ä—Å–∏–º —á–µ—Ä–µ–∑ BeautifulSoup
    # 5. –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –ú–µ–¥–ª–µ–Ω–Ω–æ (3-5 —Å–µ–∫ –Ω–∞ –ø–æ—Å—Ç)
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ 30 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏
- –°–ª—É—á–∞–π–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### üî• –°—Ä–æ—á–Ω–æ (1-2 —á–∞—Å–∞):
1. ‚úÖ **Telegram** - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫—É –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
   - –ó–∞–º–µ–Ω–∏—Ç—å `parent_source_id` –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `CommentHelper`
   - –§–∞–π–ª: `collectors/telegram_user_collector.py`

2. ‚úÖ **VK** - –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
   - –í `collect()` –¥–æ–±–∞–≤–∏—Ç—å `get_wall_comments()`
   - –§–∞–π–ª: `collectors/vk_collector.py`

### ‚ö° –í–∞–∂–Ω–æ (2-3 —á–∞—Å–∞):
3. ‚úÖ **API endpoints** - –¥–æ–±–∞–≤–∏—Ç—å –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - `GET /api/post/<id>/comments` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç—É
   - `GET /api/posts/with-comments` - –ø–æ—Å—Ç—ã —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
   - `GET /api/stats/comments` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - –§–∞–π–ª: `app_enhanced.py`

4. ‚ö†Ô∏è **OK.ru** - –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `get_post_comments()` –≤ `ok_selenium_collector.py`
   - –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ –≤ `collect()`
   - ‚ö†Ô∏è –£—á–µ—Å—Ç—å: –º–µ–¥–ª–µ–Ω–Ω–æ, —Ä–∏—Å–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

### üìù –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (1-2 –¥–Ω—è):
5. ‚è≥ **–î–∑–µ–Ω** - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≤—è–∑–∫—É –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
6. ‚è≥ **–§—Ä–æ–Ω—Ç–µ–Ω–¥** - –ø–æ–∫–∞–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
7. ‚è≥ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - —Ç—Ä–µ–Ω–¥—ã –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö
8. ‚è≥ **–≠–∫—Å–ø–æ—Ä—Ç** - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ Excel/CSV

---

## üì¶ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```
utils/
  ‚îî‚îÄ‚îÄ comment_helper.py          [‚úÖ –ù–û–í–´–ô] –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç—ã —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏

docs/
  ‚îú‚îÄ‚îÄ COMMENTS_ANALYSIS.md       [‚úÖ –ù–û–í–´–ô] –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º
  ‚îú‚îÄ‚îÄ COMMENTS_IMPLEMENTATION_GUIDE.md  [‚úÖ –ù–û–í–´–ô] –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
  ‚îî‚îÄ‚îÄ COMMENTS_SUMMARY.md        [‚úÖ –ù–û–í–´–ô] –≠—Ç–æ—Ç —Ñ–∞–π–ª

tests/
  ‚îî‚îÄ‚îÄ test_comments.py           [‚úÖ –ù–û–í–´–ô] –¢–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
```

---

## üí° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
```bash
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip list | grep -E "flask|sqlalchemy|transformers"
```

### –®–∞–≥ 2: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ CommentHelper
```python
from utils.comment_helper import CommentHelper
from analyzers.sentiment_analyzer import SentimentAnalyzer

analyzer = SentimentAnalyzer()
```

### –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞—Ö
```python
# –í–º–µ—Å—Ç–æ —Å—Ç–∞—Ä–æ–≥–æ —Å–ø–æ—Å–æ–±–∞:
# save_to_db(post)
# for comment in comments:
#     comment['parent_source_id'] = post['source_id']  # ‚ùå
#     save_to_db(comment)

# –ù–æ–≤—ã–π —Å–ø–æ—Å–æ–±:
saved_post, saved_comments = CommentHelper.save_post_with_comments(
    post_data, comments_data, analyzer
)  # ‚úÖ
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ë–î
```python
from utils.comment_helper import CommentHelper

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
total = CommentHelper.get_all_comments_count()
print(f"–í—Å–µ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: {total}")

# –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç—É
comments = CommentHelper.get_post_comments(post_id=1)
for c in comments:
    print(f"- {c.author}: {c.text[:50]}...")

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Å—Ç–∞
stats = CommentHelper.get_comment_stats(post_id=1)
print(f"–ü–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö: {stats['positive']}, –ù–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö: {stats['negative']}")
```

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: Telegram —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
```python
from collectors.telegram_user_collector import TelegramUserCollector
from utils.comment_helper import CommentHelper
from analyzers.sentiment_analyzer import SentimentAnalyzer

collector = TelegramUserCollector()
analyzer = SentimentAnalyzer()

# –°–±–æ—Ä —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
messages = collector.collect(collect_comments=True)

# –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ—Å—Ç—ã –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
posts_dict = {}
comments_dict = {}

for msg in messages:
    if msg.get('is_comment'):
        parent_id = msg.get('parent_source_id')
        if parent_id not in comments_dict:
            comments_dict[parent_id] = []
        comments_dict[parent_id].append(msg)
    else:
        posts_dict[msg['source_id']] = msg

# –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ
for source_id, post in posts_dict.items():
    comments = comments_dict.get(source_id, [])
    CommentHelper.save_post_with_comments(post, comments, analyzer)
```

### –ü—Ä–∏–º–µ—Ä 2: VK —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
```python
from collectors.vk_collector import VKCollector
from utils.comment_helper import CommentHelper

collector = VKCollector()
posts = collector.search_posts('–¢–ù–° —ç–Ω–µ—Ä–≥–æ', count=50)

for post in posts:
    # –ü–∞—Ä—Å–∏–º ID –∏–∑ source_id
    parts = post['source_id'].split('_')
    owner_id, post_id = parts[2], parts[3]
    
    # –ü–æ–ª—É—á–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
    comments = collector.get_wall_comments(owner_id, post_id)
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø—Ä–∏–≤—è–∑–∫–æ–π
    CommentHelper.save_post_with_comments(post, comments)
```

### –ü—Ä–∏–º–µ—Ä 3: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
```python
from utils.comment_helper import CommentHelper

# –í—Å–µ –ø–æ—Å—Ç—ã —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
posts_data = CommentHelper.get_posts_with_comments(limit=10)

for item in posts_data:
    post = item['post']
    comments = item['comments']
    stats = item['stats']
    
    print(f"\n–ü–æ—Å—Ç: {post.text[:50]}...")
    print(f"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤: {stats['total']}")
    print(f"–ü–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö: {stats['positive']}")
    print(f"–ù–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö: {stats['negative']}")
    print(f"–°—Ä–µ–¥–Ω—è—è —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: {stats['avg_sentiment']:+.2f}")
    
    for comment in comments[:3]:
        print(f"  - {comment.author}: {comment.text[:40]}...")
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. Telegram
**–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:** ‚úÖ –û—Ç–ª–∏—á–Ω–æ
- –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ Telethon
- –ù–µ—Ç –ª–∏–º–∏—Ç–æ–≤ –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞—Ö
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–∞–Ω–∞–ª—ã —Ç—Ä–µ–±—É—é—Ç –ø–æ–¥–ø–∏—Å–∫–∏

### 2. VK
**–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:** ‚úÖ –•–æ—Ä–æ—à–æ
- VK API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- –õ–∏–º–∏—Ç: 100 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∑–∞ –∑–∞–ø—Ä–æ—Å
- –¢—Ä–µ–±—É–µ—Ç—Å—è access token
- –ó–∞–∫—Ä—ã—Ç—ã–µ –≥—Ä—É–ø–ø—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –±–æ–ª—å—à–µ:**
```python
# –ü–∞–≥–∏–Ω–∞—Ü–∏—è
offset = 0
all_comments = []
while True:
    comments = vk.wall.getComments(owner_id, post_id, offset=offset, count=100)
    if not comments['items']:
        break
    all_comments.extend(comments['items'])
    offset += 100
    time.sleep(0.5)
```

### 3. OK.ru
**–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:** ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ
- ‚ùå –ù–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ API
- ‚úÖ –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Selenium
- –ú–µ–¥–ª–µ–Ω–Ω–æ: 3-5 —Å–µ–∫ –Ω–∞ –ø–æ—Å—Ç
- –†–∏—Å–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- –ö–∞–ø—á–∏ –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ü–∞—Ä—Å–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ –ø–æ—Å—Ç—ã
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ 30 –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏
- –°–ª—É—á–∞–π–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ 2-5 —Å–µ–∫

### 4. –Ø–Ω–¥–µ–∫—Å.–î–∑–µ–Ω
**–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:** ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ
- ‚ùå –ù–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ API
- ‚úÖ Selenium —Ä–∞–±–æ—Ç–∞–µ—Ç
- –Ø–Ω–¥–µ–∫—Å –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–ø—á–∏
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏

### 5. –ù–æ–≤–æ—Å—Ç–Ω—ã–µ —Å–∞–π—Ç—ã
**–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:** ‚ö†Ô∏è –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ
- –ö–∞–∂–¥—ã–π —Å–∞–π—Ç –∏–º–µ–µ—Ç —Å–≤–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç Disqus/VK Comments
- –ú–æ–≥—É—Ç –±—ã—Ç—å –≤ iframe
- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–∞—Ä—Å–µ—Ä –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∞–π—Ç–∞

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:
1. –ò–∑—É—á–∏—Ç–µ `COMMENTS_ANALYSIS.md` - –ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ `COMMENTS_IMPLEMENTATION_GUIDE.md` - –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `CommentHelper` –≤ —Å–≤–æ–∏—Ö –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞—Ö

### –ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ:
1. –û–±–Ω–æ–≤–∏—Ç–µ Telegram –∫–æ–ª–ª–µ–∫—Ç–æ—Ä
2. –û–±–Ω–æ–≤–∏—Ç–µ VK –∫–æ–ª–ª–µ–∫—Ç–æ—Ä
3. –î–æ–±–∞–≤—å—Ç–µ API endpoints
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –í –±—É–¥—É—â–µ–º:
1. –î–æ–±–∞–≤—å—Ç–µ OK.ru –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. –î–æ–±–∞–≤—å—Ç–µ –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤–∞–∂–Ω—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–í—Å–µ —Ñ–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
- `COMMENTS_ANALYSIS.md` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
- `COMMENTS_IMPLEMENTATION_GUIDE.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- `COMMENTS_SUMMARY.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª
- `test_comments.py` - —Ç–µ—Å—Ç—ã
- `utils/comment_helper.py` - –≥–æ—Ç–æ–≤—ã–π –∫–æ–¥

**–í–æ–ø—Ä–æ—Å—ã?** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é!

---

## ‚úÖ –ò—Ç–æ–≥–æ

**–°–æ–∑–¥–∞–Ω–æ:**
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø—Ä–∏–≤—è–∑–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- ‚úÖ CommentHelper —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (50+ KB)
- ‚úÖ –¢–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚úÖ API endpoints (–≥–æ—Ç–æ–≤—ã–µ)

**–û—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å:**
- ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä—ã
- ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–°—Ç–∞—Ç—É—Å:** üéØ **–ì–û–¢–û–í–û –ö –í–ù–ï–î–†–ï–ù–ò–Æ**

–°–∏—Å—Ç–µ–º–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞.
–¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `CommentHelper`.
