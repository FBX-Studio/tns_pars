"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è Access Token –¥–ª—è OK API
"""
import sys
sys.stdout.reconfigure(encoding='utf-8')

print("="*70)
print("–ü–û–õ–£–ß–ï–ù–ò–ï ACCESS TOKEN –î–õ–Ø OK API")
print("="*70)

print("\nüìã –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ –ø—Ä–∞–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞")
print("-"*70)
print("1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://ok.ru/devaccess")
print("2. –ù–∞–∂–º–∏—Ç–µ '–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞'")

print("\nüìã –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ OK")
print("-"*70)
print("1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://ok.ru/vitrine/myuploaded")
print("2. –ù–∞–∂–º–∏—Ç–µ '–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ'")
print("3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:")
print("   - –ù–∞–∑–≤–∞–Ω–∏–µ: –¢–ù–° —ç–Ω–µ—Ä–≥–æ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥")
print("   - –ò–º—è –≤ —Å—Å—ã–ª–∫–µ: tns_monitoring (–ª–∞—Ç–∏–Ω–∏—Ü–µ–π)")
print("   - –û–ø–∏—Å–∞–Ω–∏–µ: –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞")
print("\n4. –î–æ–±–∞–≤—å—Ç–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É OAuth:")
print("   - –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É: http://localhost:5000")
print("   - –°–ø–∏—Å–æ–∫ redirect_uri: http://localhost:5000/oauth/callback")
print("\n5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ email - —Ç–∞–º –±—É–¥—É—Ç –∫–ª—é—á–∏:")
print("   - Application ID")
print("   - Public Key")
print("   - Secret Key")

print("\n" + "="*70)
print("üìã –®–∞–≥ 3: –ü–æ–ª—É—á–∏—Ç–µ Access Token")
print("-"*70)
print("\n‚≠ê –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä!")
print("-"*70)
print("1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è")
print("   URL: https://ok.ru/game/{–≤–∞—à_app_id}")
print("2. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ –¥–æ –±–ª–æ–∫–∞ '–í–µ—á–Ω—ã–π access_token'")
print("3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏")
print("4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ access_token –∏ session_secret_key")
print("\n–≠—Ç–æ –°–ê–ú–´–ô –ü–†–û–°–¢–û–ô —Å–ø–æ—Å–æ–±!")

print("\n" + "="*70)
print("üìã –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è")
print("-"*70)
print("–ï—Å–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ OAuth:")

print("\n" + "="*70)
print("üìã –®–∞–≥ 4: –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á–∏ –≤ .env")
print("-"*70)
print("–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª .env –∏ –¥–æ–±–∞–≤—å—Ç–µ:")
print("""
# OK API
OK_APP_ID=–≤–∞—à_app_id
OK_PUBLIC_KEY=–≤–∞—à_public_key
OK_SECRET_KEY=–≤–∞—à_secret_key
OK_ACCESS_TOKEN=–ø–æ–ª—É—á–∏—Ç–µ_–Ω–∞_—à–∞–≥–µ_3
""")

print("\n" + "="*70)
print("üìã –®–∞–≥ 3: –ü–æ–ª—É—á–∏—Ç–µ Access Token")
print("-"*70)

# –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º APP_ID
app_id = input("\n–í–≤–µ–¥–∏—Ç–µ –≤–∞—à Application ID: ").strip()

if not app_id:
    print("\n‚ùå Application ID –Ω–µ —É–∫–∞–∑–∞–Ω")
    sys.exit(1)

# –§–æ—Ä–º–∏—Ä—É–µ–º URL –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
redirect_uri = "http://localhost:5000/oauth/callback"
scope = "VALUABLE_ACCESS;LONG_ACCESS_TOKEN;GROUP_CONTENT"

auth_url = f"https://connect.ok.ru/oauth/authorize?client_id={app_id}&scope={scope}&response_type=token&redirect_uri={redirect_uri}&layout=w"

print("\n" + "="*70)
print("üîó URL –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞:")
print("-"*70)
print(auth_url)

print("\n" + "="*70)
print("üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:")
print("-"*70)
print("1. –û—Ç–∫—Ä–æ–π—Ç–µ URL –≤—ã—à–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ")
print("2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç OK")
print("3. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é")
print("4. –í–∞—Å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –Ω–∞:")
print("   http://localhost:5000/oauth/callback#access_token=...")
print("5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ access_token –∏–∑ URL")
print("   (—á–∞—Å—Ç—å –ø–æ—Å–ª–µ #access_token= –¥–æ & –∏–ª–∏ –¥–æ –∫–æ–Ω—Ü–∞)")

print("\n" + "="*70)
input("\n–ù–∞–∂–º–∏—Ç–µ Enter –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞...")

access_token = input("\n–í—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π Access Token: ").strip()

if not access_token:
    print("\n‚ùå Access Token –Ω–µ —É–∫–∞–∑–∞–Ω")
    sys.exit(1)

print("\n" + "="*70)
print("‚úÖ –¢–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω!")
print("-"*70)

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —á—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ .env
print("\n–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª .env:")
print(f"""
OK_APP_ID={app_id}
OK_ACCESS_TOKEN={access_token}
""")

print("\n" + "="*70)
print("üìã –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –î–æ–±–∞–≤—å—Ç–µ PUBLIC_KEY –∏ SECRET_KEY")
print("-"*70)
print("–ù–µ –∑–∞–±—É–¥—å—Ç–µ —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–∏—Ç—å:")
print("OK_PUBLIC_KEY=–≤–∞—à_public_key")
print("OK_SECRET_KEY=–≤–∞—à_secret_key")

print("\n" + "="*70)
print("üöÄ –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:")
print("-"*70)
print("python test_ok_api.py")

print("\n" + "="*70)
print("‚úÖ –ì–æ—Ç–æ–≤–æ!")
print("="*70)
