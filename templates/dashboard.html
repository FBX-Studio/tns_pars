{% extends "base.html" %}

{% block title %}–î–∞—à–±–æ—Ä–¥ - –¢–ù–° —ç–Ω–µ—Ä–≥–æ –ù–ù{% endblock %}

{% block content %}
<h2 style="margin-bottom: 2rem;">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–∑—ã–≤–æ–≤</h2>

<div class="stats">
    <div class="stat-card">
        <h3>–í—Å–µ–≥–æ –æ—Ç–∑—ã–≤–æ–≤</h3>
        <div class="value">{{ stats.total }}</div>
    </div>
    <div class="stat-card">
        <h3>–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</h3>
        <div class="value" style="color: #ffc107;">{{ stats.pending }}</div>
    </div>
    <div class="stat-card">
        <h3>–ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ</h3>
        <div class="value" style="color: #28a745;">{{ stats.positive }}</div>
    </div>
    <div class="stat-card">
        <h3>–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ</h3>
        <div class="value" style="color: #dc3545;">{{ stats.negative }}</div>
    </div>
    <div class="stat-card">
        <h3>–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ</h3>
        <div class="value" style="color: #6c757d;">{{ stats.neutral }}</div>
    </div>
</div>

<div class="card">
    <h3 style="margin-bottom: 1rem;">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–∑—ã–≤—ã</h3>
    <table>
        <thead>
            <tr>
                <th>–î–∞—Ç–∞</th>
                <th>–ò—Å—Ç–æ—á–Ω–∏–∫</th>
                <th>–ê–≤—Ç–æ—Ä</th>
                <th>–û—Ç–∑—ã–≤</th>
                <th>–¢–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
            </tr>
        </thead>
        <tbody>
            {% for review in reviews %}
            <tr>
                <td>{{ review.collected_date.strftime('%d.%m.%Y %H:%M') if review.collected_date else '-' }}</td>
                <td><strong>{{ review.source.upper() }}</strong></td>
                <td>{{ review.author or '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ' }}</td>
                <td>
                    <a href="{{ url_for('review_detail', review_id=review.id) }}" style="color: #1e3c72; text-decoration: none;">
                        {{ review.text[:100] }}{% if review.text|length > 100 %}...{% endif %}
                    </a>
                </td>
                <td>
                    {% if review.sentiment_label == 'positive' %}
                        <span class="badge badge-positive">–ü–æ–∑–∏—Ç–∏–≤–Ω—ã–π</span>
                    {% elif review.sentiment_label == 'negative' %}
                        <span class="badge badge-negative">–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–π</span>
                    {% else %}
                        <span class="badge badge-neutral">–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π</span>
                    {% endif %}
                </td>
                <td>
                    {% if review.requires_manual_review %}
                        <span class="badge badge-pending">–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</span>
                    {% elif review.moderation_status == 'approved' %}
                        <span class="badge badge-approved">–û–¥–æ–±—Ä–µ–Ω</span>
                    {% elif review.moderation_status == 'rejected' %}
                        <span class="badge badge-rejected">–û—Ç–∫–ª–æ–Ω–µ–Ω</span>
                    {% else %}
                        <span class="badge badge-neutral">–ù–æ–≤—ã–π</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <div style="margin-top: 1rem; text-align: center;">
        <a href="{{ url_for('reviews_list') }}" class="btn btn-primary">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –æ—Ç–∑—ã–≤—ã</a>
    </div>
</div>
{% endblock %}
