# ๐ Selenium ะบะพะปะปะตะบัะพั ะดะปั OK.ru - ะะฝััััะบัะธั

## โ ะงัะพ ัะตะฐะปะธะทะพะฒะฐะฝะพ

**ะัะพะฑะปะตะผะฐ:** OK.ru ะฑะปะพะบะธััะตั ะฒัะต ะฐะฒัะพะผะฐัะธัะตัะบะธะต ะทะฐะฟัะพัั (ะฒะพะทะฒัะฐัะฐะตั 0 ะฑะฐะนั)

**ะะตัะตะฝะธะต:** ะะพะปะฝะพัะตะฝะฝัะน ะฑัะฐัะทะตั ัะตัะตะท Selenium + ะฐะฒัะพะผะฐัะธัะตัะบะธะต ะฑะตัะฟะปะฐัะฝัะต ะฟัะพะบัะธ

---

## ๐ ะัััััะน ััะฐัั

### 1. ะัะบัะพะนัะต ะฟัะธะปะพะถะตะฝะธะต

```
http://127.0.0.1:5001
```

### 2. ะะฐะฟัััะธัะต ัะฑะพั

1. ะะตัะตะนะดะธัะต ะฒ **๐ ะะพะฝะธัะพัะธะฝะณ**
2. ะัะฑะตัะธัะต ะฟะตัะธะพะด (ะฝะฐะฟัะธะผะตั, "ะะฐ ะฟะพัะปะตะดะฝะธะน ะดะตะฝั")
3. ะะฐะถะผะธัะต **"ะะฐะฟัััะธัั ัะฑะพั"**
4. ะกะผะพััะธัะต ะปะพะณะธ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ

### 3. ะงัะพ ัะฒะธะดะธัะต ะฒ ะปะพะณะฐั

```
[MONITOR] โ ะัะฟะพะปัะทัะตััั OK Selenium ะบะพะปะปะตะบัะพั (ะะะะะะะขะะข)
[OK-Selenium] ================================================
[OK-Selenium] ะะะะฃะกะ SELENIUM ะะะะะะะขะะะ ะะะฏ OK.RU
[OK-Selenium] ================================================

[OK-Selenium] ะะพะฟััะบะฐ 1: ะะะ ะฟัะพะบัะธ
[OK-Selenium] โ Chrome ะดัะฐะนะฒะตั ััะฟะตัะฝะพ ะธะฝะธัะธะฐะปะธะทะธัะพะฒะฐะฝ
[OK-Selenium] ะะฐะฟััะบ ะฟะพะธัะบะฐ: ะขะะก ัะฝะตัะณะพ ะะ
[OK-Selenium] ะัะบััะฒะฐั: https://ok.ru/search?st.query=...
[OK-Selenium] ะัะตะณะพ ะฝะฐะนะดะตะฝะพ ัะปะตะผะตะฝัะพะฒ: 15
[OK-Selenium] โ ะะฐะนะดะตะฝ ะฟะพัั: ะขะะก ะญะฝะตัะณะพ ะะ ะพัะฒะตัะธะปะฐ ะฝะฐ...
[OK-Selenium] โ ะะฐะนะดะตะฝ ะฟะพัั: ะะฑัะฐัะตะฝะธะต ะฒ ะขะะก ะฑัะปะพ ัะฐััะผะพััะตะฝะพ...
[OK-Selenium] โโโ ะฃะกะะะฅ! ะกะพะฑัะฐะฝะพ 3 ะฟะพััะพะฒ
[OK-Selenium] ะกะบัะธะฝัะพั ัะพััะฐะฝะตะฝ: ok_selenium_screenshot.png
```

### 4. ะัะพัะผะพัั ัะตะทัะปััะฐัะพะฒ

1. ะะตัะตะนะดะธัะต ะฒ **๐ฌ ะัะทัะฒั**
2. ะคะธะปััั โ ะััะพัะฝะธะบ โ **ok**
3. ะฃะฒะธะดะธัะต ะฝะฐะนะดะตะฝะฝัะต ะฟะพััั

---

## โ๏ธ ะะฐะบ ัะฐะฑะพัะฐะตั

### ะะปะณะพัะธัะผ ัะฐะฑะพัั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   ะะพะฟััะบะฐ 1: ะะะ ะฟัะพะบัะธ             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ 1. ะะฐะฟััะบ Chrome (headless)         โ
โ 2. ะัะบัััะธะต ok.ru/search            โ
โ 3. ะะถะธะดะฐะฝะธะต ะทะฐะณััะทะบะธ (3-5 ัะตะบ)     โ
โ 4. ะกะบัะพะปะปะธะฝะณ ัััะฐะฝะธัั               โ
โ 5. ะะฐััะธะฝะณ ัะตะทัะปััะฐัะพะฒ              โ
โ 6. ะกะพะทะดะฐะฝะธะต ัะบัะธะฝัะพัะฐ               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
           โ
           โ (ะตัะปะธ 0 ะฟะพััะพะฒ)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   ะะพะฟััะบะฐ 2: ะก ะะะะะกะ               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ 1. ะะฐะณััะทะบะฐ ัะฟะธัะบะฐ ะฟัะพะบัะธ           โ
โ    - geonode.com                    โ
โ    - proxy-list.download            โ
โ 2. ะะพะฟััะบะฐ ั ะฟัะพะบัะธ #1              โ
โ    โโ ะะต ัะฐะฑะพัะฐะตั? โ ะฟัะพะบัะธ #2      โ
โ 3. ะะพะฟััะบะฐ ั ะฟัะพะบัะธ #2              โ
โ    โโ ะะต ัะฐะฑะพัะฐะตั? โ ะฟัะพะบัะธ #3      โ
โ 4. ะะพะฟััะบะฐ ั ะฟัะพะบัะธ #3              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
           โ
           โ (ัะตะทัะปััะฐั)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   โ ะะฐะนะดะตะฝะพ N ะฟะพััะพะฒ                โ
โ   ะธะปะธ                               โ
โ   โ ะะพััั ะฝะต ะฝะฐะนะดะตะฝั               โ
โ   (ะฝัะถะตะฝ Tor ะธะปะธ ะฟะปะฐัะฝัะต ะฟัะพะบัะธ)    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะขะตัะฝะพะปะพะณะธะธ

- **Selenium WebDriver** - ะฐะฒัะพะผะฐัะธะทะฐัะธั ะฑัะฐัะทะตัะฐ
- **Chrome Headless** - ะฝะตะฒะธะดะธะผัะน ะฑัะฐัะทะตั
- **webdriver-manager** - ะฐะฒัะพะผะฐัะธัะตัะบะฐั ัััะฐะฝะพะฒะบะฐ ChromeDriver
- **BeautifulSoup** - ะฟะฐััะธะฝะณ HTML
- **ะะฑัะพะด ะดะตัะตะบัะธะธ ะฑะพัะพะฒ** - ัะบัััะธะต ะฟัะธะทะฝะฐะบะพะฒ Selenium

---

## โ๏ธ ะะพะทะผะพะถะฝัะต ะฟัะพะฑะปะตะผั ะธ ัะตัะตะฝะธั

### ะัะพะฑะปะตะผะฐ 1: ะะตัะฒัะน ะทะฐะฟััะบ ะผะตะดะปะตะฝะฝัะน (~30 ัะตะบัะฝะด)

**ะัะธัะธะฝะฐ:** ะะฐะณััะทะบะฐ ChromeDriver

**ะะตัะตะฝะธะต:** ะะพะดะพะถะดะธัะต, ััะพ ะฟัะพะธััะพะดะธั ัะพะปัะบะพ ะพะดะธะฝ ัะฐะท

**ะะพะณะธ:**
```
[OK-Selenium] โ Chrome ะดัะฐะนะฒะตั ััะฟะตัะฝะพ ะธะฝะธัะธะฐะปะธะทะธัะพะฒะฐะฝ
```

---

### ะัะพะฑะปะตะผะฐ 2: ะะฐะฟัะฐ ะฝะฐ OK.ru

**ะัะธะทะฝะฐะบะธ:**
```
[OK-Selenium] โ ะะฑะฝะฐััะถะตะฝะฐ ะบะฐะฟัะฐ! ะัะพะฑัั ะฟะพะดะพะถะดะฐัั...
[OK-Selenium] ะะพะฟััะบะฐ 2: ะก ะะะกะะะะขะะซะะ ะะะะะกะ
```

**ะะตัะตะฝะธะต 1: ะะฐัััะพะนัะต Tor Browser**

1. ะกะบะฐัะฐะนัะต Tor: https://www.torproject.org/
2. ะะฐะฟัััะธัะต Tor Browser
3. ะัะบัะพะนัะต **โ๏ธ ะะฐัััะพะนะบะธ โ ะัะพะบัะธ ะธ Tor**
4. ะะบะปััะธัะต:
   ```
   USE_TOR=True
   TOR_PORT=9150
   ```

**ะะตัะตะฝะธะต 2: ะัะฟะพะปัะทัะนัะต ะฟะปะฐัะฝัะต ะฟัะพะบัะธ**

1. ะัะฟะธัะต SOCKS5 ะฟัะพะบัะธ (ะฝะฐะฟัะธะผะตั, ะฝะฐ proxy-seller.com)
2. ะัะบัะพะนัะต **โ๏ธ ะะฐัััะพะนะบะธ โ ะัะพะบัะธ**
3. ะฃะบะฐะถะธัะต:
   ```
   SOCKS_PROXY=socks5://user:pass@host:port
   ```

**ะะตัะตะฝะธะต 3: ะะพะปััะธัะต API OK.ru**

1. ะะฐัะตะณะธัััะธััะนัะต ะฟัะธะปะพะถะตะฝะธะต: https://ok.ru/dk
2. ะะพะปััะธัะต ัะพะบะตะฝ ะดะพัััะฟะฐ
3. ะะพะฑะฐะฒััะต ะฒ `.env`:
   ```
   OK_ACCESS_TOKEN=ะฒะฐั_ัะพะบะตะฝ
   OK_APP_KEY=ะฒะฐั_ะบะปัั
   ```

---

### ะัะพะฑะปะตะผะฐ 3: ะะพััะพะฒ ะฝะต ะฝะฐะนะดะตะฝะพ (0 ะฟะพััะพะฒ)

**ะะพะทะผะพะถะฝัะต ะฟัะธัะธะฝั:**

1. **OK.ru ะฑะปะพะบะธััะตั ะฒะฐั IP**
   - ะะตัะตะฝะธะต: ะธัะฟะพะปัะทัะนัะต ะฟัะพะบัะธ/VPN/Tor

2. **ะะพ ะฒะฐัะธะผ ะบะปััะตะฒัะผ ัะปะพะฒะฐะผ ะฝะตั ะฟะพััะพะฒ**
   - ะัะพะฒะตัััะต ะฒัััะฝัั: https://ok.ru/search?st.query=ะขะะก+ัะฝะตัะณะพ+ะะ
   - ะะทะผะตะฝะธัะต ะบะปััะตะฒัะต ัะปะพะฒะฐ ะฒ **โ๏ธ ะะฐัััะพะนะบะธ โ ะะปััะตะฒัะต ัะปะพะฒะฐ**

3. **ะัะต ะฑะตัะฟะปะฐัะฝัะต ะฟัะพะบัะธ ะทะฐะฑะปะพะบะธัะพะฒะฐะฝั**
   - ะะตัะฟะปะฐัะฝัะต ะฟัะพะบัะธ ัะฐััะพ ะฝะต ัะฐะฑะพัะฐัั
   - ะัะฟะพะปัะทัะนัะต ะฟะปะฐัะฝัะต ะฟัะพะบัะธ ะธะปะธ Tor

**ะะพะณะธ ะฟัะธ ะฑะปะพะบะธัะพะฒะบะต:**
```
[OK-Selenium] ะะะกะขะะ ะะ ะะะะะะะ
[OK-Selenium] ะะพะทะผะพะถะฝัะต ะฟัะธัะธะฝั:
[OK-Selenium] 1. OK.ru ะฟะพะบะฐะทัะฒะฐะตั ะบะฐะฟัั
[OK-Selenium] 2. ะัะต ะฟัะพะบัะธ ะทะฐะฑะปะพะบะธัะพะฒะฐะฝั
[OK-Selenium] 3. ะะฐ ัััะฐะฝะธัะต ะฝะตั ะฟะพััะพะฒ ะฟะพ ะฒะฐัะธะผ ะบะปััะตะฒัะผ ัะปะพะฒะฐะผ
```

---

### ะัะพะฑะปะตะผะฐ 4: ะัะธะฑะบะฐ "Chrome driver not found"

**ะัะธัะธะฝะฐ:** ะะต ัััะฐะฝะพะฒะปะตะฝ Chrome ะธะปะธ ChromeDriver

**ะะตัะตะฝะธะต:** ะฃััะฐะฝะพะฒะธัะต Chrome:
- Windows: https://www.google.com/chrome/
- ChromeDriver ะทะฐะณััะทะธััั ะฐะฒัะพะผะฐัะธัะตัะบะธ

---

## ๐ ะัะปะฐะดะบะฐ

### ะกะบัะธะฝัะพัั ะดะปั ะฟัะพะฒะตัะบะธ

ะะพัะปะต ะบะฐะถะดะพะณะพ ะทะฐะฟััะบะฐ ัะพะทะดะฐะตััั ัะบัะธะฝัะพั:
```
E:\work\tns_pars\ok_selenium_screenshot.png
```

ะัะบัะพะนัะต ะตะณะพ ััะพะฑั ัะฒะธะดะตัั ััะพ ะธะผะตะฝะฝะพ ะฒะธะดะธั ะฑัะฐัะทะตั.

### ะะธะฐะณะฝะพััะธัะตัะบะธะน ัะบัะธะฟั

ะะฐะฟัััะธัะต ะดะปั ะฟัะพะฒะตัะบะธ:
```bash
cd E:\work\tns_pars
python test_ok_parsing.py
```

ะัะบัะพะตั 3 ัะฐะนะปะฐ:
- `ok_search_response.html` - ะดะตัะบัะพะฟะฝะฐั ะฒะตััะธั (ะพะฑััะฝะพ ะฟัััะฐั)
- `ok_group_response.html` - ะณััะฟะฟะฐ (ะพะฑััะฝะพ ััะตะฑัะตั ะฐะฒัะพัะธะทะฐัะธั)
- `ok_mobile_response.html` - ะผะพะฑะธะปัะฝะฐั ะฒะตััะธั (ะผะพะถะตั ัะฐะฑะพัะฐัั)

### ะะพะดัะพะฑะฝัะต ะปะพะณะธ

ะงัะพะฑั ัะฒะธะดะตัั ะฑะพะปััะต ะดะตัะฐะปะตะน:
1. ะัะบัะพะนัะต `collectors/ok_selenium_collector.py`
2. ะะฐะนะดะธัะต ัััะพะบั: `chrome_options.add_argument('--headless=new')`
3. ะะฐะบะพะผะผะตะฝัะธััะนัะต ะตั: `# chrome_options.add_argument('--headless=new')`
4. ะะตัะตะทะฐะฟัััะธัะต ัะตัะฒะตั

ะขะตะฟะตัั ะฑัะฐัะทะตั ะพัะบัะพะตััั ะฒะธะดะธะผัะผ ะธ ะฒั ัะฒะธะดะธัะต ััะพ ะฟัะพะธััะพะดะธั!

---

## ๐ ะกัะฐัะธััะธะบะฐ

### ะงัะพ ัะพะฑะธัะฐะตััั:

- **ะััะพัะฝะธะบ:** ok.ru
- **ะะพะธัะบ:** ะะพ ะบะปััะตะฒัะผ ัะปะพะฒะฐะผ (ะขะะก ัะฝะตัะณะพ, ะขะะก ะะ ะธ ั.ะด.)
- **ะคะธะปัััะฐัะธั:** ะัะบะปััะฐัััั ะฝะตัะตะปะตะฒะฐะฝัะฝัะต (ะะฐะทะฟัะพะผ, ะข ะะปัั, ะฒะฐะบะฐะฝัะธะธ)
- **ะะฝะฐะปะธะท:** ะะฒัะพะผะฐัะธัะตัะบะธะน ะฐะฝะฐะปะธะท ัะพะฝะฐะปัะฝะพััะธ
- **ะกะพััะฐะฝะตะฝะธะต:** ะ ะฑะฐะทั ะดะฐะฝะฝัั SQLite

### ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั:

- **ะะตะท ะฟัะพะบัะธ:** 5-10 ัะตะบัะฝะด ะฝะฐ ะทะฐะฟัะพั
- **ะก ะฟัะพะบัะธ:** 15-30 ัะตะบัะฝะด (ะฟัะพะฒะตัะบะฐ ะฝะตัะบะพะปัะบะธั ะฟัะพะบัะธ)
- **ะะตัะฒัะน ะทะฐะฟััะบ:** +30 ัะตะบัะฝะด (ะทะฐะณััะทะบะฐ ChromeDriver)

---

## ๐ฏ ะะตะบะพะผะตะฝะดะฐัะธะธ

### ะะปั ะปัััะธั ัะตะทัะปััะฐัะพะฒ:

1. โ **ะัะฟะพะปัะทัะนัะต Tor** - ัะฐะผัะน ะฝะฐะดะตะถะฝัะน ัะฟะพัะพะฑ
2. โ **ะฃะฒะตะปะธัััะต ะทะฐะดะตัะถะบะธ** - ะผะตะฝััะต ะฒะตัะพััะฝะพััั ะฑะปะพะบะธัะพะฒะบะธ
3. โ **ะะฐะฟััะบะฐะนัะต ัะตะถะต** - ะฝะต ัะฐัะต 1 ัะฐะทะฐ ะฒ ัะฐั
4. โ **ะัะพะฒะตััะนัะต ัะบัะธะฝัะพัั** - ะฒะธะดะธัะต ััะพ ะฒะธะดะธั ะฑะพั
5. โ **ะะฐัััะพะนัะต ะบะปััะตะฒัะต ัะปะพะฒะฐ** - ัะพัะฝะตะต ัะตะทัะปััะฐัั

### ะะ ะดะตะปะฐะนัะต:

1. โ ะะต ะทะฐะฟััะบะฐะนัะต ัะฑะพั ะบะฐะถะดัั ะผะธะฝััั
2. โ ะะต ะธัะฟะพะปัะทัะนัะต ะฑะตะท ะฟัะพะบัะธ ะตัะปะธ ะฒะธะดะธัะต ะบะฐะฟัั
3. โ ะะต ะพัะบะปััะฐะนัะต ะทะฐะดะตัะถะบะธ (random_delay)
4. โ ะะต ะถะดะธัะต 100% ัะตะทัะปััะฐั - OK.ru ะพัะตะฝั ะทะฐัะธัะตะฝ

---

## ๐ ะะทะผะตะฝัะฝะฝัะต ัะฐะนะปั

- โ `collectors/ok_selenium_collector.py` - **ะะะะซะ** Selenium ะบะพะปะปะตะบัะพั
- โ `collectors/ok_collector_working.py` - **ะะะะซะ** ะผัะปััะธะผะตัะพะด ะบะพะปะปะตะบัะพั
- โ `async_monitor_websocket.py` - ะฟัะธะพัะธัะตั Selenium ะบะพะปะปะตะบัะพัะฐ
- โ `test_ok_parsing.py` - **ะะะะซะ** ะดะธะฐะณะฝะพััะธัะตัะบะธะน ัะบัะธะฟั
- โ `ะะะะะะะะะฏ.md` - ะฟะพะดัะพะฑะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั
- โ `OK_SELENIUM_SETUP.md` - ััะพั ัะฐะนะป (ะธะฝััััะบัะธั)

---

## โ FAQ

**Q: ะัะถะฝะพ ะปะธ ััะพ-ัะพ ัััะฐะฝะฐะฒะปะธะฒะฐัั ะดะพะฟะพะปะฝะธัะตะปัะฝะพ?**
A: ะะตั, ะตัะปะธ Chrome ัะถะต ัััะฐะฝะพะฒะปะตะฝ. ChromeDriver ะทะฐะณััะทะธััั ะฐะฒัะพะผะฐัะธัะตัะบะธ.

**Q: ะะฐะฑะพัะฐะตั ะปะธ ะฝะฐ Linux/Mac?**
A: ะะฐ, Selenium ัะฐะฑะพัะฐะตั ะฝะฐ ะฒัะตั ะฟะปะฐััะพัะผะฐั.

**Q: ะะพะถะฝะพ ะปะธ ะฟะฐััะธัั ะฑะตะท ะฟัะพะบัะธ?**
A: ะะพะถะฝะพ ะฟะพะฟัะพะฑะพะฒะฐัั, ะฝะพ OK.ru ัะบะพัะตะต ะฒัะตะณะพ ะทะฐะฑะปะพะบะธััะตั.

**Q: ะกะบะพะปัะบะพ ะฟะพััะพะฒ ะผะพะถะฝะพ ัะพะฑัะฐัั?**
A: ะะฐะฒะธัะธั ะพั OK.ru ะธ ะฒะฐัะธั ะบะปััะตะฒัั ัะปะพะฒ. ะะฑััะฝะพ 3-10 ะฟะพััะพะฒ ะทะฐ ัะฐะท.

**Q: ะะพัะตะผั ัะฐะบ ะผะตะดะปะตะฝะฝะพ?**
A: Selenium ะทะฐะฟััะบะฐะตั ัะตะฐะปัะฝัะน ะฑัะฐัะทะตั - ััะพ ะผะตะดะปะตะฝะฝะตะต ัะตะผ HTTP ะทะฐะฟัะพัั, ะฝะพ ะฝะฐะดะตะถะฝะตะต.

**Q: ะะพะถะฝะพ ะปะธ ัะฒะตะปะธัะธัั ัะบะพัะพััั?**
A: ะะฐ, ัะผะตะฝััะธัะต ะทะฐะดะตัะถะบะธ ะฒ ะบะพะดะต, ะฝะพ ัะธัะบ ะฑะปะพะบะธัะพะฒะบะธ ะฒััะต.

---

## ๐ ะะพัะพะฒะพ!

Selenium ะบะพะปะปะตะบัะพั ะฝะฐัััะพะตะฝ ะธ ะณะพัะพะฒ ะบ ัะฐะฑะพัะต! ๐

**ะะฐะฟัััะธัะต ัะฑะพั:** http://127.0.0.1:5001 โ ๐ ะะพะฝะธัะพัะธะฝะณ โ ะะฐะฟัััะธัั ัะฑะพั

ะฃะดะฐัะธ! ๐ช
