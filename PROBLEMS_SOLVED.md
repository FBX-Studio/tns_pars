# Решённые проблемы с коллекторами

## Дата: 07.10.2025

### Проблема 1: Не находятся новости из RSS
**Причина**: Неправильный URL RSS-ленты  
**Ошибка**: `404 Client Error: Not Found for url: https://www.nn.ru/rss.xml`  
**Решение**: Исправлен URL с `https://www.nn.ru/rss.xml` на `https://nn.ru/rss` (убран www. и .xml)  
**Файл**: `collectors/news_collector_light.py` строка 23

### Проблема 2: Telegram не находит сообщения
**Причина**: База данных Telegram заблокирована другим процессом  
**Ошибка**: `Error initializing Telegram client: database is locked`  
**Решение**: 
1. Закройте приложение `app_enhanced.py` если оно запущено
2. Убедитесь что нет других скриптов использующих Telegram API
3. Перезапустите сбор

**Дополнительно**: Настроено 93 Telegram канала - возможно слишком много и медленно работает. Рекомендуется оставить только самые активные:
```
@moynizhny, @bez_cenz_nn, @today_nn, @nizhniy_smi, @nn52signal, @nn_obl
```

### Проблема 3: Фильтры слишком строгие
**В Telegram коллекторе**:
- Очень строгая проверка на "ТНС энерго" + "Нижний Новгород"
- Многие релевантные посты отфильтровываются

**Рекомендация**: Смягчить фильтры в `collectors/telegram_user_collector.py`

### Проблема 4: Кодировка в логах
**Причина**: Windows консоль не поддерживает UTF-8 символы (→, ✓, ✗)  
**Решение**: Логирование работает, но символы не отображаются в консоли. Это не критично.

## Итоговые рекомендации

### 1. Для улучшения работы RSS коллектора:
- ✅ Исправлен URL на `https://nn.ru/rss`
- Добавить больше RSS источников (сейчас только один)
- Расширить ключевые слова

### 2. Для Telegram:
- Уменьшить количество каналов с 93 до 10-15 самых активных
- Увеличить период сбора (сейчас 30 дней)
- Смягчить фильтры релевантности

### 3. Для VK:
- Работает корректно
- Нет проблем

## Что делать дальше

1. **Перезапустить приложение** - RSS URL исправлен
2. **Закрыть все процессы** перед запуском Telegram коллектора
3. **Оптимизировать список каналов** в `.env` файле
4. **Запустить тест**: `python test_collectors_debug.py` чтобы проверить работу

## Ожидаемый результат

После исправлений:
- ✅ **RSS**: будут найдены новости с nn.ru
- ✅ **Telegram**: будут найдены сообщения (если закрыть другие процессы)
- ✅ **VK**: продолжит работать
